var Se=Object.defineProperty;var ne=e=>{throw TypeError(e)};var Ee=(e,t,s)=>t in e?Se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var H=(e,t,s)=>Ee(e,typeof t!="symbol"?t+"":t,s),$=(e,t,s)=>t.has(e)||ne("Cannot "+s);var x=(e,t,s)=>($(e,t,"read from private field"),s?s.call(e):t.get(e)),R=(e,t,s)=>t.has(e)?ne("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,s),_=(e,t,s,o)=>($(e,t,"write to private field"),o?o.call(e,s):t.set(e,s),s),Q=(e,t,s)=>($(e,t,"access private method"),s);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function s(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(a){if(a.ep)return;a.ep=!0;const n=s(a);fetch(a.href,n)}})();const Ce="modulepreload",Te=function(e){return"/front_6th_chapter1-2/"+e},ce={},Ae=function(t,s,o){let a=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),d=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));a=Promise.allSettled(s.map(l=>{if(l=Te(l),l in ce)return;ce[l]=!0;const i=l.endsWith(".css"),u=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const g=document.createElement("link");if(g.rel=i?"stylesheet":Ce,i||(g.as="script"),g.crossOrigin="",g.href=l,d&&g.setAttribute("nonce",d),document.head.appendChild(g),i)return new Promise((O,V)=>{g.addEventListener("load",O),g.addEventListener("error",()=>V(new Error(`Unable to preload CSS for ${l}`)))})}))}function n(c){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=c,window.dispatchEvent(d),!d.defaultPrevented)throw c}return a.then(c=>{for(const d of c||[])d.status==="rejected"&&n(d.reason);return t().catch(n)})},k=new Map,le=new Set,j=new WeakMap;function Oe(e){if(le.has(e))return;le.add(e);const t=new Set;for(const s of k.keys()){const[,o]=s.split("|");t.add(o)}t.forEach(s=>{e.addEventListener(s,o=>{let a=o.target;for(;a&&a!==e;){const n=j.get(a);if(n){const c=`${n}|${s}`,d=k.get(c);if(d&&(d(o),o.cancelBubble))break}a=a.parentElement}})})}function ge(e,t,s){if(!e||!t||!s)return;let o=j.get(e);o||(o=Math.random().toString(36).substr(2,9),j.set(e,o));const a=`${o}|${t}`;k.has(a)&&Y(e,t,k.get(a)),k.set(a,s)}function Y(e,t,s){if(!e||!t||!s)return;const o=j.get(e);if(!o)return;const a=`${o}|${t}`;k.get(a)===s&&(k.delete(a),j.delete(e))}function T(e){if(e==null||typeof e=="boolean")return document.createTextNode("");if(typeof e=="string"||typeof e=="number")return document.createTextNode(String(e));if(Array.isArray(e)){const s=document.createDocumentFragment();return e.forEach(o=>{if(o!=null){const a=T(o);s.appendChild(a)}}),s}if(typeof e!="object")return document.createTextNode(String(e));const t=document.createElement(e.type);return e.props&&Object.entries(e.props).forEach(([s,o])=>{if(s.startsWith("on")){const a=s.toLowerCase().substring(2);ge(t,a,o);return}if(s==="className"){t.className=o;return}if(s==="selected"&&t.tagName==="OPTION"){t.selected=!!o;return}if(s==="checked"||s==="disabled"||s==="readOnly"){t[s]=!!o,o&&t.setAttribute(s,"");return}o!==!1&&o!=null&&t.setAttribute(s,o)}),e.children&&e.children.forEach(s=>{if(s!=null){const o=T(s);t.appendChild(o)}}),t}const pe=()=>{const e=new Set;return{subscribe:o=>e.add(o),notify:()=>e.forEach(o=>o())}},_e=(e,t=window.localStorage)=>({get:()=>{try{const n=t.getItem(e);return n?JSON.parse(n):null}catch(n){return console.error(`Error parsing storage item for key "${e}":`,n),null}},set:n=>{try{t.setItem(e,JSON.stringify(n))}catch(c){console.error(`Error setting storage item for key "${e}":`,c)}},reset:()=>{try{t.removeItem(e)}catch(n){console.error(`Error removing storage item for key "${e}":`,n)}}}),X=(e,t)=>{const{subscribe:s,notify:o}=pe();let a=t;return{getState:()=>a,dispatch:d=>{const l=e(a,d);l!==a&&(a=l,o())},subscribe:s}};function r(e,t,...s){const o=a=>a.reduce((n,c)=>c==null||typeof c=="boolean"?n:Array.isArray(c)?n.concat(o(c)):n.concat(c),[]);return{type:e,props:t,children:o(s)}}function q(e){var o;if(e==null||typeof e=="boolean")return"";if(typeof e=="string"||typeof e=="number"||typeof e!="object")return String(e);if(typeof e.type=="function"){const a={...e.props};((o=e.children)==null?void 0:o.length)>0&&(a.children=e.children.map(c=>q(c)));const n=e.type(a);return q(n)}const t=Array.isArray(e.children)?e.children.map(a=>q(a)).filter(a=>a!==""&&a!=null):e.children?[q(e.children)]:[],s=t.length>0?t:void 0;return{type:e.type,props:e.props||null,children:s}}function Le(e,t,s){t=t||{},s=s||{};const o=["checked","disabled","readOnly"];for(const[a,n]of Object.entries(s))if(!(a in t))if(a.startsWith("on")){const c=a.toLowerCase().substring(2);Y(e,c,n)}else a==="className"?(e.className="",e.removeAttribute("class")):(o.includes(a)&&(e[a]=!1),e.removeAttribute(a));for(const[a,n]of Object.entries(t))if(n!==s[a])if(a.startsWith("on")){const c=a.toLowerCase().substring(2);s[a]&&Y(e,c,s[a]),ge(e,c,n)}else a==="className"?n?e.className=n:e.removeAttribute("class"):a==="selected"&&e.tagName==="OPTION"?e.selected=!!n:o.includes(a)?(e[a]=!!n,n||e.removeAttribute(a)):n===!1||n==null?e.removeAttribute(a):e.setAttribute(a,n)}function ye(e,t,s,o=0){if(!t&&!s)return;if(!t){const l=e.childNodes[o];l&&e.removeChild(l);return}if(!s){const l=T(t);o<e.childNodes.length?e.insertBefore(l,e.childNodes[o]):e.appendChild(l);return}if(typeof t=="string"&&typeof s=="string"){const l=e.childNodes[o];l&&t!==s?l.textContent=t:l||e.appendChild(document.createTextNode(t));return}if(typeof t!=typeof s||typeof t=="string"&&typeof s=="string"&&t!==s||t.type!==s.type){const l=e.childNodes[o],i=T(t);l?e.replaceChild(i,l):e.appendChild(i);return}const a=e.childNodes[o];if(!a){e.appendChild(T(t));return}Le(a,t.props,s.props);const n=t.children||[],c=s.children||[],d=Math.max(n.length,c.length);for(let l=0;l<d;l++){const i=n[l],u=c[l];if(!i&&u){const g=a.childNodes[l];g&&a.removeChild(g);continue}if(i&&!u){const g=T(i);l<a.childNodes.length?a.insertBefore(g,a.childNodes[l]):a.appendChild(g);continue}i&&u&&ye(a,i,u,l)}for(;a.childNodes.length>n.length;)a.removeChild(a.lastChild)}function ke(e,t){const s=q(e),o=t._vNode;if(o)if(t.firstElementChild)ye(t,s,o,0);else{const n=T(s);t.appendChild(n)}else{const a=T(s);t.innerHTML="",t.appendChild(a)}return t._vNode=s,t._hasEventListeners||(Oe(t),t._hasEventListeners=!0),t.firstElementChild}var P,S,L,C,D,B;const E=class E{constructor(t=""){R(this,D);R(this,P);R(this,S);R(this,L,pe());R(this,C);_(this,P,new Map),_(this,S,null),_(this,C,t.replace(/\/$/,"")),window.addEventListener("popstate",()=>{_(this,S,Q(this,D,B).call(this)),x(this,L).notify()}),document.addEventListener("click",s=>{if(s.target.closest("[data-link]")){s.preventDefault();const o=s.target.getAttribute("href")||s.target.closest("[data-link]").getAttribute("href");o&&this.push(o)}})}get baseUrl(){return x(this,C)}get query(){return E.parseQuery(window.location.search)}set query(t){const s=E.getUrl(t,x(this,C));this.push(s)}get params(){var t;return((t=x(this,S))==null?void 0:t.params)??{}}get route(){return x(this,S)}get target(){var t;return(t=x(this,S))==null?void 0:t.handler}subscribe(t){x(this,L).subscribe(t)}addRoute(t,s){const o=[],a=t.replace(/:\w+/g,c=>(o.push(c.slice(1)),"([^/]+)")).replace(/\//g,"\\/"),n=new RegExp(`^${x(this,C)}${a}$`);x(this,P).set(t,{regex:n,paramNames:o,handler:s})}push(t){try{let s=t.startsWith(x(this,C))?t:x(this,C)+(t.startsWith("/")?t:"/"+t);`${window.location.pathname}${window.location.search}`!==s&&window.history.pushState(null,"",s),_(this,S,Q(this,D,B).call(this,s)),x(this,L).notify()}catch(s){console.error("ë¼ìš°í„° ë„¤ë¹„ê²Œì´ì…˜ ì˜¤ë¥˜:",s)}}start(){_(this,S,Q(this,D,B).call(this)),x(this,L).notify()}};P=new WeakMap,S=new WeakMap,L=new WeakMap,C=new WeakMap,D=new WeakSet,B=function(t=window.location.pathname){const{pathname:s}=new URL(t,window.location.origin);for(const[o,a]of x(this,P)){const n=s.match(a.regex);if(n){const c={};return a.paramNames.forEach((d,l)=>{c[d]=n[l+1]}),{...a,params:c,path:o}}}return null},H(E,"parseQuery",(t=window.location.search)=>{const s=new URLSearchParams(t),o={};for(const[a,n]of s)o[a]=n;return o}),H(E,"stringifyQuery",t=>{const s=new URLSearchParams;for(const[o,a]of Object.entries(t))a!=null&&a!==""&&s.set(o,String(a));return s.toString()}),H(E,"getUrl",(t,s="")=>{const a={...E.parseQuery(),...t};Object.keys(a).forEach(c=>{(a[c]===null||a[c]===void 0||a[c]==="")&&delete a[c]});const n=E.stringifyQuery(a);return`${s}${window.location.pathname.replace(s,"")}${n?`?${n}`:""}`});let J=E;const y={SET_PRODUCTS:"products/setProducts",ADD_PRODUCTS:"products/addProducts",SET_LOADING:"products/setLoading",SET_ERROR:"products/setError",SET_CATEGORIES:"products/setCategories",SET_CURRENT_PRODUCT:"products/setCurrentProduct",SET_RELATED_PRODUCTS:"products/setRelatedProducts",RESET_FILTERS:"products/resetFilters",SETUP:"products/setup",SET_STATUS:"products/setStatus"},h={ADD_ITEM:"cart/addItem",REMOVE_ITEM:"cart/removeItem",UPDATE_QUANTITY:"cart/updateQuantity",CLEAR_CART:"cart/clearCart",TOGGLE_SELECT:"cart/toggleSelect",SELECT_ALL:"cart/selectAll",DESELECT_ALL:"cart/deselectAll",REMOVE_SELECTED:"cart/removeSelected",LOAD_FROM_STORAGE:"cart/loadFromStorage",SYNC_TO_STORAGE:"cart/syncToStorage"},v={OPEN_CART_MODAL:"ui/openCartModal",CLOSE_CART_MODAL:"ui/closeCartModal",SHOW_TOAST:"ui/showToast",HIDE_TOAST:"ui/hideToast"},Z={products:[],totalCount:0,currentProduct:null,relatedProducts:[],loading:!0,error:null,status:"idle",categories:{}},Re=(e,t)=>{switch(t.type){case y.SET_STATUS:return{...e,status:t.payload};case y.SET_CATEGORIES:return{...e,categories:t.payload,loading:!1,error:null,status:"done"};case y.SET_PRODUCTS:return{...e,products:t.payload.products,totalCount:t.payload.totalCount,loading:!1,error:null,status:"done"};case y.ADD_PRODUCTS:return{...e,products:[...e.products,...t.payload.products],totalCount:t.payload.totalCount,loading:!1,error:null,status:"done"};case y.SET_LOADING:return{...e,loading:t.payload};case y.SET_ERROR:return{...e,error:t.payload,loading:!1,status:"done"};case y.SET_CURRENT_PRODUCT:return{...e,currentProduct:t.payload,loading:!1,error:null,status:"done"};case y.SET_RELATED_PRODUCTS:return{...e,relatedProducts:t.payload,status:"done"};case y.SETUP:return{...e,...t.payload};default:return e}},f=X(Re,Z),ee=_e("shopping_cart"),fe={items:[],selectedAll:!1},Ie=(e,t)=>e.find(s=>s.id===t),Pe=(e,t)=>{const s=ee.get()??fe;switch(t.type){case h.ADD_ITEM:{const{product:o,quantity:a=1}=t.payload;if(Ie(s.items,o.productId))return{...s,items:s.items.map(c=>c.id===o.productId?{...c,quantity:c.quantity+a}:c)};{const c={id:o.productId,title:o.title,image:o.image,price:parseInt(o.lprice),quantity:a,selected:!1};return{...s,items:[...s.items,c]}}}case h.REMOVE_ITEM:return{...s,items:s.items.filter(o=>o.id!==t.payload)};case h.UPDATE_QUANTITY:{const{productId:o,quantity:a}=t.payload;return{...s,items:s.items.map(n=>n.id===o?{...n,quantity:Math.max(1,a)}:n)}}case h.CLEAR_CART:return{...s,items:[],selectedAll:!1};case h.TOGGLE_SELECT:{const o=t.payload,a=s.items.map(c=>c.id===o?{...c,selected:!c.selected}:c),n=a.length>0&&a.every(c=>c.selected);return{...s,items:a,selectedAll:n}}case h.SELECT_ALL:{const o=s.items.map(a=>({...a,selected:!0}));return{...s,items:o,selectedAll:!0}}case h.DESELECT_ALL:{const o=s.items.map(a=>({...a,selected:!1}));return{...s,items:o,selectedAll:!1}}case h.REMOVE_SELECTED:return{...s,items:s.items.filter(o=>!o.selected),selectedAll:!1};case h.LOAD_FROM_STORAGE:return{...s,...t.payload};default:return s}},w=X(Pe,fe),De={cartModal:{isOpen:!1},globalLoading:!1,toast:{isVisible:!1,message:"",type:"info"}},Me=(e,t)=>{switch(t.type){case v.OPEN_CART_MODAL:return{...e,cartModal:{isOpen:!0}};case v.CLOSE_CART_MODAL:return{...e,cartModal:{isOpen:!1}};case v.HIDE_TOAST:return{...e,toast:{...e.toast,isVisible:!1}};case v.SHOW_TOAST:return{...e,toast:{isVisible:!0,message:t.payload.message,type:t.payload.type||"info"}};default:return e}},N=X(Me,De),he="/front_6th_chapter1-2/",m=new J(he),z=new WeakMap,I={current:null,previous:null},Ue={mount:null,unmount:null,watches:[],deps:[],mounted:!1},te=e=>(z.has(e)||z.set(e,{...Ue}),z.get(e)),qe=(e,t)=>!Array.isArray(e)||!Array.isArray(t)?!1:e.length!==t.length?!0:e.some((s,o)=>s!==t[o]),je=e=>{var s;const t=te(e);t.mounted||(console.log("ğŸš€ í˜ì´ì§€ ë§ˆìš´íŠ¸:",e.name),(s=t.mount)==null||s.call(t),t.mounted=!0,t.deps=[])},He=e=>{var s;const t=te(e);t.mounted&&(console.log("ğŸ”» í˜ì´ì§€ ì–¸ë§ˆìš´íŠ¸:",e.name),(s=t.unmount)==null||s.call(t),t.mounted=!1)},be=({onMount:e,onUnmount:t,watches:s}={},o)=>{const a=te(o);return typeof e=="function"&&(a.mount=e),typeof t=="function"&&(a.unmount=t),Array.isArray(s)&&(a.watches=typeof s[0]=="function"?[s]:s),(...n)=>{const c=I.current!==o;return I.current&&c&&He(I.current),I.previous=I.current,I.current=o,c?je(o):a.watches&&a.watches.forEach(([d,l],i)=>{const u=d();qe(u,a.deps[i])&&(console.log(`ğŸ“Š ì˜ì¡´ì„± ë³€ê²½ ê°ì§€ (${o.name}):`,a.deps[i],"â†’",u),l()),a.deps[i]=Array.isArray(u)?[...u]:[]}),o(...n)}};async function re(e={}){const{limit:t=20,search:s="",category1:o="",category2:a="",sort:n="price_asc"}=e,c=e.current??e.page??1,d=new URLSearchParams({page:c.toString(),limit:t.toString(),...s&&{search:s},...o&&{category1:o},...a&&{category2:a},sort:n});return await(await fetch(`/api/products?${d}`)).json()}async function Qe(e){return await(await fetch(`/api/products/${e}`)).json()}async function We(){return await(await fetch("/api/categories")).json()}const Be=async()=>{m.query={current:void 0},f.dispatch({type:y.SETUP,payload:{...Z,loading:!0,status:"pending"}});try{const[{products:e,pagination:{total:t}},s]=await Promise.all([re(m.query),We()]);f.dispatch({type:y.SETUP,payload:{products:e,categories:s,totalCount:t,loading:!1,status:"done"}})}catch(e){throw f.dispatch({type:y.SET_ERROR,payload:e.message}),e}},se=async(e=!0)=>{try{f.dispatch({type:y.SETUP,payload:{loading:!0,status:"pending",error:null}});const{products:t,pagination:{total:s}}=await re(m.query),o={products:t,totalCount:s};if(e){f.dispatch({type:y.SET_PRODUCTS,payload:o});return}f.dispatch({type:y.ADD_PRODUCTS,payload:o})}catch(t){throw f.dispatch({type:y.SET_ERROR,payload:t.message}),t}},Fe=async()=>{const e=f.getState();!(e.products.length<e.totalCount)||e.loading||(m.query={current:Number(m.query.current??1)+1},await se(!1))},Ge=e=>{m.query={search:e,current:1}},F=e=>{m.query={...e,current:1}},Ve=e=>{m.query={sort:e,current:1}},$e=e=>{m.query={limit:e,current:1}},ie=async e=>{try{const t=f.getState().currentProduct;if(e===(t==null?void 0:t.productId)){t.category2&&await de(t.category2,e);return}f.dispatch({type:y.SETUP,payload:{...Z,currentProduct:null,loading:!0,status:"pending"}});const s=await Qe(e);f.dispatch({type:y.SET_CURRENT_PRODUCT,payload:s}),s.category2&&await de(s.category2,e)}catch(t){throw console.error("ìƒí’ˆ ìƒì„¸ í˜ì´ì§€ ë¡œë“œ ì‹¤íŒ¨:",t),f.dispatch({type:y.SET_ERROR,payload:t.message}),t}},de=async(e,t)=>{try{const a=(await re({category2:e,limit:20,page:1})).products.filter(n=>n.productId!==t);f.dispatch({type:y.SET_RELATED_PRODUCTS,payload:a})}catch(s){console.error("ê´€ë ¨ ìƒí’ˆ ë¡œë“œ ì‹¤íŒ¨:",s),f.dispatch({type:y.SET_RELATED_PRODUCTS,payload:[]})}},ze=()=>{try{const e=ee.get();e&&w.dispatch({type:h.LOAD_FROM_STORAGE,payload:e})}catch(e){console.error("ì¥ë°”êµ¬ë‹ˆ ë¡œë“œ ì‹¤íŒ¨:",e)}},A=()=>{try{const e=w.getState();ee.set(e)}catch(e){console.error("ì¥ë°”êµ¬ë‹ˆ ì €ì¥ ì‹¤íŒ¨:",e)}},xe=(e,t=1)=>{w.dispatch({type:h.ADD_ITEM,payload:{product:e,quantity:t}}),A(),N.dispatch({type:v.SHOW_TOAST,payload:{message:"ì¥ë°”êµ¬ë‹ˆì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤",type:"success"}}),setTimeout(()=>{N.dispatch({type:v.HIDE_TOAST})},3e3)},Ye=e=>{w.dispatch({type:h.REMOVE_ITEM,payload:e}),A()},ae=(e,t)=>{w.dispatch({type:h.UPDATE_QUANTITY,payload:{productId:e,quantity:t}}),A()},Je=e=>{w.dispatch({type:h.TOGGLE_SELECT,payload:e}),A()},Ke=()=>{w.dispatch({type:h.SELECT_ALL}),A()},Xe=()=>{w.dispatch({type:h.DESELECT_ALL}),A()},Ze=()=>{w.dispatch({type:h.REMOVE_SELECTED}),A(),N.dispatch({type:v.SHOW_TOAST,payload:{message:"ì„ íƒëœ ìƒí’ˆë“¤ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤",type:"info"}}),setTimeout(()=>{N.dispatch({type:v.HIDE_TOAST})},3e3)},et=()=>{w.dispatch({type:h.CLEAR_CART}),A(),N.dispatch({type:v.SHOW_TOAST,payload:{message:"ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì›Œì¡ŒìŠµë‹ˆë‹¤",type:"info"}}),setTimeout(()=>{N.dispatch({type:v.HIDE_TOAST})},3e3)},p=({src:e,...t})=>{const s=String(he+e).replace("//","/");return r("img",{src:s,...t})},tt=[10,20,50,100],rt=[{value:"price_asc",label:"ê°€ê²© ë‚®ì€ìˆœ"},{value:"price_desc",label:"ê°€ê²© ë†’ì€ìˆœ"},{value:"name_asc",label:"ì´ë¦„ìˆœ"},{value:"name_desc",label:"ì´ë¦„ ì—­ìˆœ"}],st=async e=>{if(e.key==="Enter"){const t=e.target.value.trim();try{await Ge(t)}catch(s){console.error("ê²€ìƒ‰ ì‹¤íŒ¨:",s)}}},at=async e=>{const t=parseInt(e.target.value);try{await $e(t)}catch(s){console.error("ìƒí’ˆ ìˆ˜ ë³€ê²½ ì‹¤íŒ¨:",s)}},ot=async e=>{const t=e.target.value;try{await Ve(t)}catch(s){console.error("ì •ë ¬ ë³€ê²½ ì‹¤íŒ¨:",s)}},ue=async e=>{const t=e.target.getAttribute("data-breadcrumb");try{if(t==="reset")await F({category1:"",category2:""});else if(t==="category1"){const s=e.target.getAttribute("data-category1");await F({category1:s,category2:""})}}catch(s){console.error("ë¸Œë ˆë“œí¬ëŸ¼ ë„¤ë¹„ê²Œì´ì…˜ ì‹¤íŒ¨:",s)}},nt=async e=>{const t=e.target.getAttribute("data-category1");if(t)try{await F({category1:t,category2:""})}catch(s){console.error("1depth ì¹´í…Œê³ ë¦¬ ì„ íƒ ì‹¤íŒ¨:",s)}},ct=async e=>{const t=e.target.getAttribute("data-category1"),s=e.target.getAttribute("data-category2");if(!(!t||!s))try{await F({category1:t,category2:s})}catch(o){console.error("2depth ì¹´í…Œê³ ë¦¬ ì„ íƒ ì‹¤íŒ¨:",o)}};function lt({searchQuery:e="",limit:t=20,sort:s="price_asc",category:o={},categories:a={}}){const n=Object.keys(a).length>0?Object.keys(a):[],c=tt.map(i=>r("option",{key:i,value:i,selected:Number(t)===i},i,"ê°œ")),d=rt.map(({value:i,label:u})=>r("option",{key:i,value:i,selected:s===i},u)),l=n.map(i=>r("button",{key:i,"data-category1":i,className:`category1-filter-btn text-left px-3 py-2 text-sm rounded-md border transition-colors
                 bg-white border-gray-300 text-gray-700 hover:bg-gray-50`,onClick:nt},i));return r("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4"},r("div",{className:"mb-4"},r("div",{className:"relative"},r("input",{type:"text",id:"search-input",placeholder:"ìƒí’ˆëª…ì„ ê²€ìƒ‰í•´ë³´ì„¸ìš”...",value:e,className:`w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg
                        focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,onKeyDown:st}),r("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},r(p,{src:"/search-icon.svg",alt:"ê²€ìƒ‰",className:"h-5 w-5 text-gray-400"})))),r("div",{className:"space-y-3"},r("div",{className:"space-y-2"},r("div",{className:"flex items-center gap-2"},r("label",{className:"text-sm text-gray-600"},"ì¹´í…Œê³ ë¦¬:"),["ì „ì²´",o.category1,o.category2].filter((i,u)=>u===0||!!i).map((i,u)=>{if(i==="ì „ì²´")return r("button",{key:"reset","data-breadcrumb":"reset",className:"text-xs hover:text-blue-800 hover:underline",onClick:ue},"ì „ì²´");if(u===1)return r("button",{key:i,"data-breadcrumb":"category1","data-category1":i,className:"text-xs hover:text-blue-800 hover:underline",onClick:ue},i);if(u===2)return r("span",{key:i,className:"text-xs text-gray-600 cursor-default"},i)}).reduce((i,u,g)=>(g>0&&i.push(r("span",{className:"text-xs text-gray-500"},">")),i.push(u),i),[])),!o.category1&&r("div",{className:"flex flex-wrap gap-2"},n.length>0?l:r("div",{className:"text-sm text-gray-500 italic"},"ì¹´í…Œê³ ë¦¬ ë¡œë”© ì¤‘...")),o.category1&&a[o.category1]&&r("div",{className:"space-y-2"},r("div",{className:"flex flex-wrap gap-2"},Object.keys(a[o.category1]).map(i=>{const u=o.category2===i;return r("button",{key:i,"data-category1":o.category1,"data-category2":i,className:`category2-filter-btn text-left px-3 py-2 text-sm rounded-md border transition-colors
                               ${u?"bg-blue-100 border-blue-300 text-blue-800":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,onClick:ct},i)})))),r("div",{className:"flex gap-2 items-center justify-between"},r("div",{className:"flex items-center gap-2"},r("label",{className:"text-sm text-gray-600"},"ê°œìˆ˜:"),r("select",{id:"limit-select",className:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onChange:at},c)),r("div",{className:"flex items-center gap-2"},r("label",{className:"text-sm text-gray-600"},"ì •ë ¬:"),r("select",{id:"sort-select",className:`text-sm border border-gray-300 rounded px-2 py-1
                           focus:ring-1 focus:ring-blue-500 focus:border-blue-500`,onChange:ot},d)))))}const it=e=>{const t=e.target.closest("[data-product-id]"),s=t.getAttribute("data-product-id"),o=t.previousElementSibling;if(s&&o){const a=parseInt(o.value)+1;o.value=a,ae(s,a)}},dt=e=>{const t=e.target.closest("[data-product-id]"),s=t.getAttribute("data-product-id"),o=t.nextElementSibling;if(s&&o){const a=Math.max(1,parseInt(o.value)-1);o.value=a,ae(s,a)}},ut=(e,t)=>{const s=Math.max(1,parseInt(t)||1);e&&ae(e,s)};function mt({id:e,title:t,image:s,price:o,quantity:a,selected:n}){const c=o*a;return r("div",{className:"flex items-center py-3 border-b border-gray-100 cart-item","data-product-id":e},r("label",{className:"flex items-center mr-3"},r("input",{type:"checkbox",checked:n,className:`cart-item-checkbox w-4 h-4 text-blue-600 border-gray-300 rounded
                      focus:ring-blue-500`,"data-product-id":e,onChange:()=>Je(e)})),r("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden mr-3 flex-shrink-0"},r("img",{src:s,alt:t,className:"w-full h-full object-cover cursor-pointer cart-item-image","data-product-id":e})),r("div",{className:"flex-1 min-w-0"},r("h4",{className:"text-sm font-medium text-gray-900 truncate cursor-pointer cart-item-title","data-product-id":e},t),r("p",{className:"text-sm text-gray-600 mt-1"},o.toLocaleString(),"ì›"),r("div",{className:"flex items-center mt-2"},r("button",{className:`quantity-decrease-btn w-7 h-7 flex items-center justify-center
                         border border-gray-300 rounded-l-md bg-gray-50 hover:bg-gray-100`,"data-product-id":e,onClick:dt},r(p,{src:"/minus-icon.svg",alt:"ê°ì†Œ",className:"w-3 h-3"})),r("input",{type:"number",value:a,min:"1",className:`quantity-input w-12 h-7 text-center text-sm border-t border-b
                        border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500`,disabled:!0,"data-product-id":e,onChange:d=>ut(e,d.target.value)}),r("button",{className:`quantity-increase-btn w-7 h-7 flex items-center justify-center
                         border border-gray-300 rounded-r-md bg-gray-50 hover:bg-gray-100`,"data-product-id":e,onClick:it},r(p,{src:"/plus-icon.svg",alt:"ì¦ê°€",className:"w-3 h-3"})))),r("div",{className:"text-right ml-3"},r("p",{className:"text-sm font-medium text-gray-900"},c.toLocaleString(),"ì›"),r("button",{className:"cart-item-remove-btn mt-1 text-xs text-red-600 hover:text-red-800","data-product-id":e,onClick:()=>Ye(e)},"ì‚­ì œ")))}const me=()=>{N.dispatch({type:v.CLOSE_CART_MODAL})},gt=e=>{e.target.checked?Ke():Xe()},pt=()=>{N.dispatch({type:v.SHOW_TOAST,payload:{message:"êµ¬ë§¤ ê¸°ëŠ¥ì€ ì¶”í›„ êµ¬í˜„ ì˜ˆì •ì…ë‹ˆë‹¤.",type:"info"}})};let K=!1;const ve=e=>{e.key==="Escape"&&(N.getState().cartModal.isOpen&&N.dispatch({type:v.CLOSE_CART_MODAL}),document.removeEventListener("keydown",ve),K=!1)},yt=()=>{K||(document.addEventListener("keydown",ve),K=!0)};function ft({items:e=[],selectedAll:t=!1,isOpen:s=!1}){if(yt(),!s)return"";const o=e.filter(d=>d.selected),a=o.length,n=e.reduce((d,l)=>d+l.price*l.quantity,0),c=o.reduce((d,l)=>d+l.price*l.quantity,0);return r("div",{className:"fixed inset-0 z-50 overflow-y-auto cart-modal"},r("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity cart-modal-overlay",onClick:me}),r("div",{className:"flex min-h-full items-end justify-center p-0 sm:items-center sm:p-4"},r("div",{className:"relative bg-white rounded-t-lg sm:rounded-lg shadow-xl w-full max-w-md sm:max-w-lg max-h-[90vh] overflow-hidden"},r("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 flex items-center justify-between"},r("h2",{className:"text-lg font-bold text-gray-900 flex items-center"},r(p,{src:"/cart-icon.svg",alt:"ì¥ë°”êµ¬ë‹ˆ",className:"w-5 h-5 mr-2"}),"ì¥ë°”êµ¬ë‹ˆ",e.length>0&&r("span",{className:"text-sm font-normal text-gray-600 ml-1"},"(",e.length,")")),r("button",{id:"cart-modal-close-btn",className:"text-gray-400 hover:text-gray-600 p-1",onClick:me},r(p,{src:"/close-icon.svg",alt:"ë‹«ê¸°",className:"w-6 h-6"}))),e.length===0?r("div",{className:"flex-1 flex items-center justify-center p-8"},r("div",{className:"text-center"},r("div",{className:"text-gray-400 mb-4"},r(p,{src:"/empty-cart-icon.svg",alt:"ë¹ˆ ì¥ë°”êµ¬ë‹ˆ",className:"mx-auto h-12 w-12"})),r("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"ì¥ë°”êµ¬ë‹ˆê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤"),r("p",{className:"text-gray-600"},"ì›í•˜ëŠ” ìƒí’ˆì„ ë‹´ì•„ë³´ì„¸ìš”!"))):r("div",{className:"flex flex-col max-h-[calc(90vh-120px)]"},r("div",{className:"p-4 border-b border-gray-200 bg-gray-50"},r("label",{className:"flex items-center text-sm text-gray-700"},r("input",{type:"checkbox",id:"cart-modal-select-all-checkbox",checked:t,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mr-2",onChange:gt}),"ì „ì²´ì„ íƒ (",e.length,"ê°œ)")),r("div",{className:"flex-1 overflow-y-auto"},r("div",{className:"p-4 space-y-4"},e.map(d=>r(mt,{...d}))))),e.length>0&&r("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 p-4"},a>0&&r("div",{className:"flex justify-between items-center mb-3 text-sm"},r("span",{className:"text-gray-600"},"ì„ íƒí•œ ìƒí’ˆ (",a,"ê°œ)"),r("span",{className:"font-medium"},c.toLocaleString(),"ì›")),r("div",{className:"flex justify-between items-center mb-4"},r("span",{className:"text-lg font-bold text-gray-900"},"ì´ ê¸ˆì•¡"),r("span",{className:"text-xl font-bold text-blue-600"},n.toLocaleString(),"ì›")),r("div",{className:"space-y-2"},a>0&&r("button",{id:"cart-modal-remove-selected-btn",className:`w-full bg-red-600 text-white py-2 px-4 rounded-md
                                 hover:bg-red-700 transition-colors text-sm`,onClick:Ze},"ì„ íƒí•œ ìƒí’ˆ ì‚­ì œ (",a,"ê°œ)"),r("div",{className:"flex gap-2"},r("button",{id:"cart-modal-clear-cart-btn",className:`flex-1 bg-gray-600 text-white py-2 px-4 rounded-md
                                 hover:bg-gray-700 transition-colors text-sm`,onClick:et},"ì „ì²´ ë¹„ìš°ê¸°"),r("button",{id:"cart-modal-checkout-btn",className:`flex-1 bg-blue-600 text-white py-2 px-4 rounded-md
                                 hover:bg-blue-700 transition-colors text-sm`,onClick:pt},"êµ¬ë§¤í•˜ê¸°")))))))}const ht=({error:e})=>r("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},r("div",{className:"text-center"},r("div",{className:"text-red-500 mb-4"},r(p,{src:"/error-large-icon.svg",alt:"ì˜¤ë¥˜",className:"mx-auto h-12 w-12"})),r("h1",{className:"text-xl font-bold text-gray-900 mb-2"},"ìƒí’ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),r("p",{className:"text-gray-600 mb-4"},e||"ìš”ì²­í•˜ì‹  ìƒí’ˆì´ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."),r("button",{onClick:()=>window.history.back(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 mr-2"},"ì´ì „ í˜ì´ì§€"),r("a",{href:"/","data-link":"/",className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700"},"í™ˆìœ¼ë¡œ"))),bt=()=>{N.dispatch({type:v.HIDE_TOAST})};function xt({isVisible:e=!1,message:t="",type:s="info"}){if(!e)return"";const o=()=>{switch(s){case"success":return{bg:"bg-green-600",icon:r(p,{src:"/success-icon.svg",alt:"ì„±ê³µ",className:"w-5 h-5"})};case"error":return{bg:"bg-red-600",icon:r(p,{src:"/error-icon.svg",alt:"ì˜¤ë¥˜",className:"w-5 h-5"})};case"warning":return{bg:"bg-yellow-600",icon:r(p,{src:"/warning-icon.svg",alt:"ê²½ê³ ",className:"w-5 h-5"})};default:return{bg:"bg-blue-600",icon:r(p,{src:"/info-icon.svg",alt:"ì •ë³´",className:"w-5 h-5"})}}},{bg:a,icon:n}=o();return r("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50 toast-container"},r("div",{className:`${a} text-white px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2 max-w-sm`},r("div",{className:"flex-shrink-0"},n),r("p",{className:"text-sm font-medium"},t),r("button",{id:"toast-close-btn",className:"flex-shrink-0 ml-2 text-white hover:text-gray-200",onClick:bt},r(p,{src:"/close-icon-white.svg",alt:"ë‹«ê¸°",className:"w-4 h-4"}))))}function vt(){return r("h1",{className:"text-xl font-bold text-gray-900"},r("a",{href:"/","data-link":"/"},"ì‡¼í•‘ëª°"))}function Nt(){return r("footer",{className:"bg-white shadow-sm sticky top-0 z-40"},r("div",{className:"max-w-md mx-auto py-8 text-center text-gray-500"},r("p",null,"Â© ",new Date().getFullYear()," í•­í•´í”ŒëŸ¬ìŠ¤ í”„ë¡ íŠ¸ì—”ë“œ ì‡¼í•‘ëª°")))}const wt=async e=>{const s=f.getState().products.find(o=>o.productId===e);s&&xe(s,1)};function St({productId:e,title:t,image:s,lprice:o,brand:a,onClick:n}){const c=Number(o),d=l=>{l.preventDefault(),n(e)};return r("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden product-card","data-product-id":e},r("div",{className:"aspect-square bg-gray-100 overflow-hidden cursor-pointer product-image",onClick:d},r("img",{src:s,alt:t,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-200",loading:"lazy"})),r("div",{className:"p-3"},r("div",{className:"cursor-pointer product-info mb-3",onClick:d},r("h3",{className:"text-sm font-medium text-gray-900 line-clamp-2 mb-1"},t),r("p",{className:"text-xs text-gray-500 mb-2"},a),r("p",{className:"text-lg font-bold text-gray-900"},c.toLocaleString(),"ì›")),r("button",{className:`w-full bg-blue-600 text-white text-sm py-2 px-3 rounded-md
                       hover:bg-blue-700 transition-colors add-to-cart-btn`,"data-product-id":e,onClick:()=>wt(e)},"ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°")))}function Et(){return r("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden animate-pulse"},r("div",{className:"aspect-square bg-gray-200"}),r("div",{className:"p-3"},r("div",{className:"h-4 bg-gray-200 rounded mb-2"}),r("div",{className:"h-3 bg-gray-200 rounded w-2/3 mb-2"}),r("div",{className:"h-5 bg-gray-200 rounded w-1/2 mb-3"}),r("div",{className:"h-8 bg-gray-200 rounded"})))}const Ct=async()=>{try{await se(!0)}catch(e){console.error("ì¬ì‹œë„ ì‹¤íŒ¨:",e)}},Tt=async e=>{m.push(`/product/${e}`)};function At({products:e=[],loading:t=!1,error:s=null,totalCount:o=0,hasMore:a=!0}){return s?r("div",{className:"text-center py-12"},r("div",{className:"text-red-500 mb-4"},r(p,{src:"/error-large-icon.svg",alt:"ì˜¤ë¥˜",className:"mx-auto h-12 w-12"})),r("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"),r("p",{className:"text-gray-600 mb-4"},s),r("button",{id:"retry-btn",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",onClick:Ct},"ë‹¤ì‹œ ì‹œë„")):!t&&e.length===0?r("div",{className:"text-center py-12"},r("div",{className:"text-gray-400 mb-4"},r(p,{src:"/search-large-icon.svg",alt:"ê²€ìƒ‰",className:"mx-auto h-12 w-12"})),r("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"ìƒí’ˆì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"),r("p",{className:"text-gray-600"},"ë‹¤ë¥¸ ê²€ìƒ‰ì–´ë¥¼ ì‹œë„í•´ë³´ì„¸ìš”.")):r("div",null,o>0&&r("div",{className:"mb-4 text-sm text-gray-600"},"ì´ ",r("span",{className:"font-medium text-gray-900"},o.toLocaleString(),"ê°œ"),"ì˜ ìƒí’ˆ"),r("div",{className:"grid grid-cols-2 gap-4 mb-6",id:"products-grid"},e.map(n=>r(St,{...n,onClick:Tt})),t&&Array.from({length:6}).map(()=>r(Et,null))),t&&e.length>0&&r("div",{className:"text-center py-4"},r("div",{className:"inline-flex items-center"},r(p,{src:"/loading-icon.svg",alt:"ë¡œë”©",className:"animate-spin h-5 w-5 text-blue-600 mr-2"}),r("span",{className:"text-sm text-gray-600"},"ìƒí’ˆì„ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."))),!a&&e.length>0&&!t&&r("div",{className:"text-center py-4 text-sm text-gray-500"},"ëª¨ë“  ìƒí’ˆì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤"),r("div",{id:"scroll-trigger",className:"h-4"}))}const Ot=async e=>{const t=new URLSearchParams(e).toString();m.push(`/?${t}`)},_t=async()=>{const e=f.getState().currentProduct,t={category1:e==null?void 0:e.category1,category2:e==null?void 0:e.category2,currentPage:1},s=new URLSearchParams(t).toString();m.push(`/?${s}`)},Lt=()=>{const e=document.getElementById("quantity-input");if(e){const t=parseInt(e.getAttribute("max"))||100;e.value=Math.min(t,parseInt(e.value)+1)}},kt=()=>{const e=document.getElementById("quantity-input");e&&(e.value=Math.max(1,parseInt(e.value)-1))},Rt=()=>{const e=document.getElementById("quantity-input"),t=e?parseInt(e.value):1,o=f.getState().currentProduct;o&&(console.log("ğŸ›’ ìƒí’ˆ ìƒì„¸ í˜ì´ì§€ì—ì„œ ì¥ë°”êµ¬ë‹ˆ ì¶”ê°€:",o),xe(o,t))};function It({product:e,relatedProducts:t=[]}){const{productId:s,title:o,image:a,lprice:n,brand:c,description:d="",rating:l=0,reviewCount:i=0,stock:u=100,category1:g,category2:O}=e,V=Number(n),M=[];return g&&M.push({name:g,category:"category1",value:g}),O&&M.push({name:O,category:"category2",value:O}),r("div",null,M.length>0&&r("nav",{className:"mb-4"},r("div",{className:"flex items-center space-x-2 text-sm text-gray-600"},r("a",{href:"/","data-link":"/",className:"hover:text-blue-600 transition-colors"},"í™ˆ"),M.map((b,U)=>[r(p,{key:`${b.category}-icon`,src:"/chevron-right-icon.svg",alt:"ì˜¤ë¥¸ìª½ í™”ì‚´í‘œ",className:"w-4 h-4 text-gray-400"}),r("button",{key:`${b.category}-btn`,className:"breadcrumb-link",[`data-${b.category}`]:b.value,onClick:()=>Ot(U===0?{category1:b.value}:{category1:M[U-1].value,category2:b.value})},b.name)]).flat())),r("div",{className:"bg-white rounded-lg shadow-sm mb-6"},r("div",{className:"p-4"},r("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden mb-4"},r("img",{src:a,alt:o,className:"w-full h-full object-cover product-detail-image"})),r("div",null,r("p",{className:"text-sm text-gray-600 mb-1"},c),r("h1",{className:"text-xl font-bold text-gray-900 mb-3"},o),l>0&&r("div",{className:"flex items-center mb-3"},r("div",{className:"flex items-center"},Array(5).fill(0).map((b,U)=>r(p,{key:U,src:"/star-icon.svg",alt:"ë³„ì ",className:`w-4 h-4 ${U<l?"text-yellow-400":"text-gray-300"}`}))),r("span",{className:"ml-2 text-sm text-gray-600"},l,".0 (",i.toLocaleString(),"ê°œ ë¦¬ë·°)")),r("div",{className:"mb-4"},r("span",{className:"text-2xl font-bold text-blue-600"},V.toLocaleString(),"ì›")),r("div",{className:"text-sm text-gray-600 mb-4"},"ì¬ê³  ",u.toLocaleString(),"ê°œ"),d&&r("div",{className:"text-sm text-gray-700 leading-relaxed mb-6"},d))),r("div",{className:"border-t border-gray-200 p-4"},r("div",{className:"flex items-center justify-between mb-4"},r("span",{className:"text-sm font-medium text-gray-900"},"ìˆ˜ëŸ‰"),r("div",{className:"flex items-center"},r("button",{id:"quantity-decrease",className:`w-8 h-8 flex items-center justify-center border border-gray-300
                             rounded-l-md bg-gray-50 hover:bg-gray-100`,onClick:kt},r(p,{src:"/quantity-minus-icon.svg",alt:"ìˆ˜ëŸ‰ ê°ì†Œ",className:"w-4 h-4"})),r("input",{type:"number",id:"quantity-input",value:"1",min:"1",max:u,className:`w-16 h-8 text-center text-sm border-t border-b border-gray-300
                            focus:ring-1 focus:ring-blue-500 focus:border-blue-500`}),r("button",{id:"quantity-increase",className:`w-8 h-8 flex items-center justify-center border border-gray-300
                             rounded-r-md bg-gray-50 hover:bg-gray-100`,onClick:Lt},r(p,{src:"/quantity-plus-icon.svg",alt:"ìˆ˜ëŸ‰ ì¦ê°€",className:"w-4 h-4"})))),r("button",{id:"add-to-cart-btn","data-product-id":s,className:`w-full bg-blue-600 text-white py-3 px-4 rounded-md
                         hover:bg-blue-700 transition-colors font-medium`,onClick:Rt},"ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°"))),r("div",{className:"mb-6"},r("button",{className:`block w-full text-center bg-gray-100 text-gray-700 py-3 px-4 rounded-md
                  hover:bg-gray-200 transition-colors go-to-product-list`,onClick:_t},"ìƒí’ˆ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°")),t.length>0&&r("div",{className:"bg-white rounded-lg shadow-sm"},r("div",{className:"p-4 border-b border-gray-200"},r("h2",{className:"text-lg font-bold text-gray-900"},"ê´€ë ¨ ìƒí’ˆ"),r("p",{className:"text-sm text-gray-600"},"ê°™ì€ ì¹´í…Œê³ ë¦¬ì˜ ë‹¤ë¥¸ ìƒí’ˆë“¤")),r("div",{className:"p-4"},r("div",{className:"grid grid-cols-2 gap-3 responsive-grid"},t.slice(0,20).map(b=>r("div",{key:b.productId,className:"bg-gray-50 rounded-lg p-3 related-product-card cursor-pointer","data-product-id":b.productId,onClick:()=>m.push(`/product/${b.productId}`)},r("div",{className:"aspect-square bg-white rounded-md overflow-hidden mb-2"},r("img",{src:b.image,alt:b.title,className:"w-full h-full object-cover",loading:"lazy"})),r("h3",{className:"text-sm font-medium text-gray-900 mb-1 line-clamp-2"},b.title),r("p",{className:"text-sm font-bold text-blue-600"},Number(b.lprice).toLocaleString(),"ì›")))))))}const Pt=(e=200)=>{const t=window.pageYOffset||document.documentElement.scrollTop,s=window.innerHeight,o=document.documentElement.scrollHeight;return t+s>=o-e},Dt=e=>{let t=!1;return(...s)=>{t||(t=!0,queueMicrotask(()=>{t=!1,e(...s)}))}},Mt=()=>{N.dispatch({type:v.OPEN_CART_MODAL})},oe=({headerLeft:e,children:t})=>{const s=w.getState(),{cartModal:o,toast:a}=N.getState(),n=s.items.length,c=r("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center"},n>99?"99+":n);return r("div",{className:"min-h-screen bg-gray-50"},r("header",{className:"bg-white shadow-sm sticky top-0 z-40"},r("div",{className:"max-w-md mx-auto px-4 py-4"},r("div",{className:"flex items-center justify-between"},e,r("div",{className:"flex items-center space-x-2"},r("button",{id:"cart-icon-btn",className:"relative p-2 text-gray-700 hover:text-gray-900 transition-colors",onClick:Mt},r(p,{src:"/cart-header-icon.svg",alt:"ì¥ë°”êµ¬ë‹ˆ",className:"w-6 h-6"}),n>0&&c))))),r("main",{className:"max-w-md mx-auto px-4 py-4"},t),r(ft,{...s,isOpen:o.isOpen}),r(xt,{...a}),r(Nt,null))},Ne=r("h1",{className:"text-xl font-bold text-gray-900"},r("a",{href:"/","data-link":"/"},"ì‡¼í•‘ëª°"));console.log(Ne);let G=!1;const we=async()=>{var e;if(((e=m.route)==null?void 0:e.path)==="/"&&Pt(200)){const t=f.getState(),s=t.products.length<t.totalCount;if(t.loading||!s)return;try{await Fe()}catch(o){console.error("ë¬´í•œ ìŠ¤í¬ë¡¤ ë¡œë“œ ì‹¤íŒ¨:",o)}}},Ut=()=>{G||(window.addEventListener("scroll",we),G=!0)},qt=()=>{G&&(window.removeEventListener("scroll",we),G=!1)},jt=be({onMount:()=>{Ut(),Be()},onUnmount:()=>{qt()},watches:[()=>{const{search:e,limit:t,sort:s,category1:o,category2:a}=m.query;return[e,t,s,o,a]},()=>se(!0)]},()=>{console.log("ğŸ  í™ˆ í˜ì´ì§€ ë¡œë“œ");const e=f.getState(),{search:t,limit:s,sort:o,category1:a,category2:n}=m.query,{products:c,loading:d,error:l,totalCount:i,categories:u}=e,g={category1:a,category2:n},O=c.length<i;return r(oe,{headerLeft:Ne},r(lt,{searchQuery:t,category:g,sort:o,limit:s,categories:u}),r("div",{className:"mb-6"},r(At,{products:c,loading:d,error:l,totalCount:i,hasMore:O})))}),Ht=be({onMount:()=>{ie(m.params.id)},watches:[()=>[m.params.id],()=>ie(m.params.id)]},()=>{const{currentProduct:e,relatedProducts:t=[],error:s,loading:o}=f.getState();return r(oe,{headerLeft:r("div",{className:"flex items-center space-x-3"},r("button",{onClick:()=>window.history.back(),className:"p-2 text-gray-700 hover:text-gray-900 transition-colors"},r(p,{src:"/back-icon.svg",alt:"ë’¤ë¡œ",className:"w-6 h-6"})),r("h1",{className:"text-lg font-bold text-gray-900"},"ìƒí’ˆ ìƒì„¸"))},r("div",{className:"min-h-screen bg-gray-50 p-4"},o?r("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},r("div",{className:"text-center"},r("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),r("p",{className:"text-gray-600"},"ìƒí’ˆ ì •ë³´ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘..."))):s&&!e?r(ht,{error:s}):r(It,{product:e,relatedProducts:t})))}),Qt=()=>oe({headerLeft:vt(),children:r("div",{className:"text-center my-4 py-20 shadow-md p-6 bg-white rounded-lg"},r(p,{src:"/404.svg",alt:"í˜ì´ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"}),r("a",{href:"/","data-link":"/",className:"inline-block px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors"},"í™ˆìœ¼ë¡œ"))});m.addRoute("/",jt);m.addRoute("/product/:id",Ht);m.addRoute(".*",Qt);const W=Dt(()=>{const e=document.getElementById("root");if(!e)return;const t=m.target;ke(r(t,null),e)});function Wt(){f.subscribe(W),w.subscribe(W),N.subscribe(W),m.subscribe(W)}const Bt=()=>Ae(async()=>{const{worker:e,workerOptions:t}=await import("./browser-D62ErfS4.js");return{worker:e,workerOptions:t}},[]).then(({worker:e,workerOptions:t})=>e.start(t));function Ft(){console.log("ğŸš€ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹œì‘ë˜ì—ˆìŠµë‹ˆë‹¤."),console.log("âœ… MSW ì›Œì»¤ ì‹œì‘ ì™„ë£Œ"),ze(),console.log("âœ… ì¥ë°”êµ¬ë‹ˆ ë°ì´í„° ë³µì› ì™„ë£Œ"),Wt(),console.log("âœ… ë Œë”ë§ ì‹œìŠ¤í…œ ì´ˆê¸°í™” ì™„ë£Œ"),m.start(),console.log("âœ… ë Œë”ë§ ì„¤ì • ì™„ë£Œ"),console.log("ğŸ‰ ì• í”Œë¦¬ì¼€ì´ì…˜ ì´ˆê¸°í™” ì™„ë£Œ!")}Bt().then(Ft);export{he as B};
