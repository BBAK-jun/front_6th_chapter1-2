var _e=Object.defineProperty;var ie=e=>{throw TypeError(e)};var Le=(e,t,r)=>t in e?_e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var H=(e,t,r)=>Le(e,typeof t!="symbol"?t+"":t,r),$=(e,t,r)=>t.has(e)||ie("Cannot "+r);var x=(e,t,r)=>($(e,t,"read from private field"),r?r.call(e):t.get(e)),I=(e,t,r)=>t.has(e)?ie("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),L=(e,t,r,n)=>($(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),W=(e,t,r)=>($(e,t,"access private method"),r);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(a){if(a.ep)return;a.ep=!0;const o=r(a);fetch(a.href,o)}})();const ke="modulepreload",Re=function(e){return"/front_6th_chapter1-2/"+e},de={},Ie=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),i=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));a=Promise.allSettled(r.map(l=>{if(l=Re(l),l in de)return;de[l]=!0;const d=l.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":ke,d||(g.as="script"),g.crossOrigin="",g.href=l,i&&g.setAttribute("nonce",i),document.head.appendChild(g),d)return new Promise((_,z)=>{g.addEventListener("load",_),g.addEventListener("error",()=>z(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(c){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=c,window.dispatchEvent(i),!i.defaultPrevented)throw c}return a.then(c=>{for(const i of c||[])i.status==="rejected"&&o(i.reason);return t().catch(o)})},R=new Map,ue=new Set,j=new WeakMap;function Pe(e){if(ue.has(e))return;ue.add(e);const t=new Set;for(const r of R.keys()){const[,n]=r.split("|");t.add(n)}t.forEach(r=>{e.addEventListener(r,n=>{let a=n.target;for(;a&&a!==e;){const o=j.get(a);if(o){const c=`${o}|${r}`,i=R.get(c);if(i&&(i(n),n.cancelBubble))break}a=a.parentElement}})})}function be(e,t,r){if(!e||!t||!r)return;let n=j.get(e);n||(n=Math.random().toString(36).substr(2,9),j.set(e,n));const a=`${n}|${t}`;R.has(a)&&J(e,t,R.get(a)),R.set(a,r)}function J(e,t,r){if(!e||!t||!r)return;const n=j.get(e);if(!n)return;const a=`${n}|${t}`;R.get(a)===r&&(R.delete(a),j.delete(e))}const De=["checked","disabled","readOnly"];function A(e){if(e==null||e===!1||e===!0)return document.createTextNode("");if(typeof e=="string"||typeof e=="number"||typeof e!="object")return document.createTextNode(String(e));if(Array.isArray(e)){const r=document.createDocumentFragment();return e.forEach(n=>{if(n!=null){const a=A(n);r.appendChild(a)}}),r}const t=document.createElement(e.type);return e.props&&Object.entries(e.props).forEach(([r,n])=>{if(r.startsWith("on")){const a=r.toLowerCase().substring(2);be(t,a,n);return}if(r==="className"){t.className=n;return}if(r==="selected"&&t.tagName==="OPTION"){t.selected=!!n;return}if(De.includes(r)){t[r]=!!n,n&&t.setAttribute(r,"");return}n!==!1&&n!=null&&t.setAttribute(r,n)}),e.children&&e.children.forEach(r=>{if(!r)return;const n=A(r);t.appendChild(n)}),t}const xe=()=>{const e=new Set;return{subscribe:n=>e.add(n),notify:()=>e.forEach(n=>n())}},Me=(e,t=window.localStorage)=>({get:()=>{try{const o=t.getItem(e);return o?JSON.parse(o):null}catch(o){return console.error(`Error parsing storage item for key "${e}":`,o),null}},set:o=>{try{t.setItem(e,JSON.stringify(o))}catch(c){console.error(`Error setting storage item for key "${e}":`,c)}},reset:()=>{try{t.removeItem(e)}catch(o){console.error(`Error removing storage item for key "${e}":`,o)}}}),ee=(e,t)=>{const{subscribe:r,notify:n}=xe();let a=t;return{getState:()=>a,dispatch:i=>{const l=e(a,i);l!==a&&(a=l,n())},subscribe:r}};function s(e,t,...r){return{type:e,props:t,children:we(r)}}const we=e=>e.reduce((t,r)=>r==null||typeof r=="boolean"?t:Array.isArray(r)?t.concat(we(r)):t.concat(r),[]),Ue=(e=200)=>{const t=window.pageYOffset||document.documentElement.scrollTop,r=window.innerHeight,n=document.documentElement.scrollHeight;return t+r>=n-e},qe=e=>{let t=!1;return(...r)=>{t||(t=!0,queueMicrotask(()=>{t=!1,e(...r)}))}};function Y(e){return e!=null&&typeof e=="object"&&typeof e.then=="function"}let ve=[];const je=new Map,He=new Set;function We(e){ve.push(e)}function me(){return ve.pop()}function Q(e,t){je.set(e,t)}function Qe(e,t){return`${e.name||"anonymous"}_${JSON.stringify(t)}`}function ge(){He.forEach(e=>{try{e()}catch(t){console.error("Rerender callback error:",t)}})}function T(e,t=!1){var a;if(e==null||e===void 0||e===!0||e===!1)return"";if(typeof e=="string"||typeof e=="number"||typeof e!="object")return String(e);if(e.type&&e.type.name==="SuspenseWrapper"){const{fallback:o}=e.props,c=e.children,i=Math.random().toString(36).substr(2,9);We({id:i});try{let l;if(Array.isArray(c)){l=[];for(const d of c){const u=T(d,!0);l.push(u)}}else l=[T(c,!0)];return me(),{type:"div",props:{"data-suspense":"resolved"},children:l}}catch(l){if(me(),Y(l))return{type:"div",props:{"data-suspense":"pending"},children:[T(o,!1)]};throw l}}if(typeof e.type=="function"){const o={...e.props};((a=e.children)==null?void 0:a.length)>0&&(o.children=e.children.map(i=>T(i,t)));const c=Qe(e.type,o);try{const i=e.type(o);if(Y(i)){if(t)throw Q(c,i),i.then(l=>{Q(c,l),ge()}).catch(l=>{console.error("Async component error:",l),Q(c,""),ge()}),i;return console.warn("Async component detected outside Suspense context. Please wrap with SuspenseWrapper."),""}return Q(c,i),T(i,t)}catch(i){if(Y(i))throw i;return console.error(i),""}}const r=Array.isArray(e.children)?e.children.map(o=>T(o,t)).filter(o=>o!==""&&o!=null):e.children?[T(e.children,t)]:[],n=r.length>0?r:void 0;return{type:e.type,props:e.props||null,children:n}}function Be(e,t,r){t=t||{},r=r||{};const n=["checked","disabled","readOnly"];for(const[a,o]of Object.entries(r))if(!(a in t))if(a.startsWith("on")){const c=a.toLowerCase().substring(2);J(e,c,o)}else a==="className"?(e.className="",e.removeAttribute("class")):(n.includes(a)&&(e[a]=!1),e.removeAttribute(a));for(const[a,o]of Object.entries(t))if(o!==r[a])if(a.startsWith("on")){const c=a.toLowerCase().substring(2);r[a]&&J(e,c,r[a]),be(e,c,o)}else a==="className"?o?e.className=o:e.removeAttribute("class"):a==="selected"&&e.tagName==="OPTION"?e.selected=!!o:n.includes(a)?(e[a]=!!o,o||e.removeAttribute(a)):o===!1||o==null?e.removeAttribute(a):e.setAttribute(a,o)}function Ne(e,t,r,n=0){if(!t&&!r)return;if(!t){const l=e.childNodes[n];l&&e.removeChild(l);return}if(!r){const l=A(t);n<e.childNodes.length?e.insertBefore(l,e.childNodes[n]):e.appendChild(l);return}if(typeof t=="string"&&typeof r=="string"){const l=e.childNodes[n];l&&t!==r?l.textContent=t:l||e.appendChild(document.createTextNode(t));return}if(typeof t!=typeof r||typeof t=="string"&&typeof r=="string"&&t!==r||t.type!==r.type){const l=e.childNodes[n],d=A(t);l?e.replaceChild(d,l):e.appendChild(d);return}const a=e.childNodes[n];if(!a){e.appendChild(A(t));return}Be(a,t.props,r.props);const o=t.children||[],c=r.children||[],i=Math.max(o.length,c.length);for(let l=0;l<i;l++){const d=o[l],u=c[l];if(!d&&u){const g=a.childNodes[l];g&&a.removeChild(g);continue}if(d&&!u){const g=A(d);l<a.childNodes.length?a.insertBefore(g,a.childNodes[l]):a.appendChild(g);continue}d&&u&&Ne(a,d,u,l)}for(;a.childNodes.length>o.length;)a.removeChild(a.lastChild)}function Fe(e,t){const r=T(e),n=t._vNode;if(n)if(t.firstElementChild)Ne(t,r,n,0);else{const o=A(r);t.appendChild(o)}else{const a=A(r);t.innerHTML="",t.appendChild(a)}return t._vNode=r,t._hasEventListeners||(Pe(t),t._hasEventListeners=!0),t.firstElementChild}var D,S,k,C,M,F;const E=class E{constructor(t=""){I(this,M);I(this,D);I(this,S);I(this,k,xe());I(this,C);L(this,D,new Map),L(this,S,null),L(this,C,t.replace(/\/$/,"")),window.addEventListener("popstate",()=>{L(this,S,W(this,M,F).call(this)),x(this,k).notify()}),document.addEventListener("click",r=>{if(r.target.closest("[data-link]")){r.preventDefault();const n=r.target.getAttribute("href")||r.target.closest("[data-link]").getAttribute("href");n&&this.push(n)}})}get baseUrl(){return x(this,C)}get query(){return E.parseQuery(window.location.search)}set query(t){const r=E.getUrl(t,x(this,C));this.push(r)}get params(){var t;return((t=x(this,S))==null?void 0:t.params)??{}}get route(){return x(this,S)}get target(){var t;return(t=x(this,S))==null?void 0:t.handler}subscribe(t){x(this,k).subscribe(t)}addRoute(t,r){const n=[],a=t.replace(/:\w+/g,c=>(n.push(c.slice(1)),"([^/]+)")).replace(/\//g,"\\/"),o=new RegExp(`^${x(this,C)}${a}$`);x(this,D).set(t,{regex:o,paramNames:n,handler:r})}push(t){try{let r=t.startsWith(x(this,C))?t:x(this,C)+(t.startsWith("/")?t:"/"+t);`${window.location.pathname}${window.location.search}`!==r&&window.history.pushState(null,"",r),L(this,S,W(this,M,F).call(this,r)),x(this,k).notify()}catch(r){console.error("라우터 네비게이션 오류:",r)}}start(){L(this,S,W(this,M,F).call(this)),x(this,k).notify()}};D=new WeakMap,S=new WeakMap,k=new WeakMap,C=new WeakMap,M=new WeakSet,F=function(t=window.location.pathname){const{pathname:r}=new URL(t,window.location.origin);for(const[n,a]of x(this,D)){const o=r.match(a.regex);if(o){const c={};return a.paramNames.forEach((i,l)=>{c[i]=o[l+1]}),{...a,params:c,path:n}}}return null},H(E,"parseQuery",(t=window.location.search)=>{const r=new URLSearchParams(t),n={};for(const[a,o]of r)n[a]=o;return n}),H(E,"stringifyQuery",t=>{const r=new URLSearchParams;for(const[n,a]of Object.entries(t))a!=null&&a!==""&&r.set(n,String(a));return r.toString()}),H(E,"getUrl",(t,r="")=>{const a={...E.parseQuery(),...t};Object.keys(a).forEach(c=>{(a[c]===null||a[c]===void 0||a[c]==="")&&delete a[c]});const o=E.stringifyQuery(a);return`${r}${window.location.pathname.replace(r,"")}${o?`?${o}`:""}`});let X=E;const y={SET_PRODUCTS:"products/setProducts",ADD_PRODUCTS:"products/addProducts",SET_LOADING:"products/setLoading",SET_ERROR:"products/setError",SET_CATEGORIES:"products/setCategories",SET_CURRENT_PRODUCT:"products/setCurrentProduct",SET_RELATED_PRODUCTS:"products/setRelatedProducts",RESET_FILTERS:"products/resetFilters",SETUP:"products/setup",SET_STATUS:"products/setStatus"},h={ADD_ITEM:"cart/addItem",REMOVE_ITEM:"cart/removeItem",UPDATE_QUANTITY:"cart/updateQuantity",CLEAR_CART:"cart/clearCart",TOGGLE_SELECT:"cart/toggleSelect",SELECT_ALL:"cart/selectAll",DESELECT_ALL:"cart/deselectAll",REMOVE_SELECTED:"cart/removeSelected",LOAD_FROM_STORAGE:"cart/loadFromStorage",SYNC_TO_STORAGE:"cart/syncToStorage"},w={OPEN_CART_MODAL:"ui/openCartModal",CLOSE_CART_MODAL:"ui/closeCartModal",SHOW_TOAST:"ui/showToast",HIDE_TOAST:"ui/hideToast"},te={products:[],totalCount:0,currentProduct:null,relatedProducts:[],loading:!0,error:null,status:"idle",categories:{}},Ge=(e,t)=>{switch(t.type){case y.SET_STATUS:return{...e,status:t.payload};case y.SET_CATEGORIES:return{...e,categories:t.payload,loading:!1,error:null,status:"done"};case y.SET_PRODUCTS:return{...e,products:t.payload.products,totalCount:t.payload.totalCount,loading:!1,error:null,status:"done"};case y.ADD_PRODUCTS:return{...e,products:[...e.products,...t.payload.products],totalCount:t.payload.totalCount,loading:!1,error:null,status:"done"};case y.SET_LOADING:return{...e,loading:t.payload};case y.SET_ERROR:return{...e,error:t.payload,loading:!1,status:"done"};case y.SET_CURRENT_PRODUCT:return{...e,currentProduct:t.payload,loading:!1,error:null,status:"done"};case y.SET_RELATED_PRODUCTS:return{...e,relatedProducts:t.payload,status:"done"};case y.SETUP:return{...e,...t.payload};default:return e}},f=ee(Ge,te),re=Me("shopping_cart"),Se={items:[],selectedAll:!1},Ve=(e,t)=>e.find(r=>r.id===t),ze=(e,t)=>{const r=re.get()??Se;switch(t.type){case h.ADD_ITEM:{const{product:n,quantity:a=1}=t.payload;if(Ve(r.items,n.productId))return{...r,items:r.items.map(c=>c.id===n.productId?{...c,quantity:c.quantity+a}:c)};{const c={id:n.productId,title:n.title,image:n.image,price:parseInt(n.lprice),quantity:a,selected:!1};return{...r,items:[...r.items,c]}}}case h.REMOVE_ITEM:return{...r,items:r.items.filter(n=>n.id!==t.payload)};case h.UPDATE_QUANTITY:{const{productId:n,quantity:a}=t.payload;return{...r,items:r.items.map(o=>o.id===n?{...o,quantity:Math.max(1,a)}:o)}}case h.CLEAR_CART:return{...r,items:[],selectedAll:!1};case h.TOGGLE_SELECT:{const n=t.payload,a=r.items.map(c=>c.id===n?{...c,selected:!c.selected}:c),o=a.length>0&&a.every(c=>c.selected);return{...r,items:a,selectedAll:o}}case h.SELECT_ALL:{const n=r.items.map(a=>({...a,selected:!0}));return{...r,items:n,selectedAll:!0}}case h.DESELECT_ALL:{const n=r.items.map(a=>({...a,selected:!1}));return{...r,items:n,selectedAll:!1}}case h.REMOVE_SELECTED:return{...r,items:r.items.filter(n=>!n.selected),selectedAll:!1};case h.LOAD_FROM_STORAGE:return{...r,...t.payload};default:return r}},N=ee(ze,Se),$e={cartModal:{isOpen:!1},globalLoading:!1,toast:{isVisible:!1,message:"",type:"info"}},Ye=(e,t)=>{switch(t.type){case w.OPEN_CART_MODAL:return{...e,cartModal:{isOpen:!0}};case w.CLOSE_CART_MODAL:return{...e,cartModal:{isOpen:!1}};case w.HIDE_TOAST:return{...e,toast:{...e.toast,isVisible:!1}};case w.SHOW_TOAST:return{...e,toast:{isVisible:!0,message:t.payload.message,type:t.payload.type||"info"}};default:return e}},v=ee(Ye,$e),se="/front_6th_chapter1-2/",m=new X(se),K=new WeakMap,P={current:null,previous:null},Ke={mount:null,unmount:null,watches:[],deps:[],mounted:!1},ae=e=>(K.has(e)||K.set(e,{...Ke}),K.get(e)),Je=(e,t)=>!Array.isArray(e)||!Array.isArray(t)?!1:e.length!==t.length?!0:e.some((r,n)=>r!==t[n]),Xe=e=>{var r;const t=ae(e);t.mounted||(console.log("🚀 페이지 마운트:",e.name),(r=t.mount)==null||r.call(t),t.mounted=!0,t.deps=[])},Ze=e=>{var r;const t=ae(e);t.mounted&&(console.log("🔻 페이지 언마운트:",e.name),(r=t.unmount)==null||r.call(t),t.mounted=!1)},Ee=({onMount:e,onUnmount:t,watches:r}={},n)=>{const a=ae(n);return typeof e=="function"&&(a.mount=e),typeof t=="function"&&(a.unmount=t),Array.isArray(r)&&(a.watches=typeof r[0]=="function"?[r]:r),(...o)=>{const c=P.current!==n;return P.current&&c&&Ze(P.current),P.previous=P.current,P.current=n,c?Xe(n):a.watches&&a.watches.forEach(([i,l],d)=>{const u=i();Je(u,a.deps[d])&&(console.log(`📊 의존성 변경 감지 (${n.name}):`,a.deps[d],"→",u),l()),a.deps[d]=Array.isArray(u)?[...u]:[]}),n(...o)}};async function ne(e={}){const{limit:t=20,search:r="",category1:n="",category2:a="",sort:o="price_asc"}=e,c=e.current??e.page??1,i=new URLSearchParams({page:c.toString(),limit:t.toString(),...r&&{search:r},...n&&{category1:n},...a&&{category2:a},sort:o});return await(await fetch(`/api/products?${i}`)).json()}async function et(e){return await(await fetch(`/api/products/${e}`)).json()}async function tt(){return await(await fetch("/api/categories")).json()}const rt=async()=>{m.query={current:void 0},f.dispatch({type:y.SETUP,payload:{...te,loading:!0,status:"pending"}});try{const[{products:e,pagination:{total:t}},r]=await Promise.all([ne(m.query),tt()]);f.dispatch({type:y.SETUP,payload:{products:e,categories:r,totalCount:t,loading:!1,status:"done"}})}catch(e){throw f.dispatch({type:y.SET_ERROR,payload:e.message}),e}},oe=async(e=!0)=>{try{f.dispatch({type:y.SETUP,payload:{loading:!0,status:"pending",error:null}});const{products:t,pagination:{total:r}}=await ne(m.query),n={products:t,totalCount:r};if(e){f.dispatch({type:y.SET_PRODUCTS,payload:n});return}f.dispatch({type:y.ADD_PRODUCTS,payload:n})}catch(t){throw f.dispatch({type:y.SET_ERROR,payload:t.message}),t}},st=async()=>{const e=f.getState();!(e.products.length<e.totalCount)||e.loading||(m.query={current:Number(m.query.current??1)+1},await oe(!1))},at=e=>{m.query={search:e,current:1}},G=e=>{m.query={...e,current:1}},nt=e=>{m.query={sort:e,current:1}},ot=e=>{m.query={limit:e,current:1}},pe=async e=>{try{const t=f.getState().currentProduct;if(e===(t==null?void 0:t.productId)){t.category2&&await ye(t.category2,e);return}f.dispatch({type:y.SETUP,payload:{...te,currentProduct:null,loading:!0,status:"pending"}});const r=await et(e);f.dispatch({type:y.SET_CURRENT_PRODUCT,payload:r}),r.category2&&await ye(r.category2,e)}catch(t){throw console.error("상품 상세 페이지 로드 실패:",t),f.dispatch({type:y.SET_ERROR,payload:t.message}),t}},ye=async(e,t)=>{try{const a=(await ne({category2:e,limit:20,page:1})).products.filter(o=>o.productId!==t);f.dispatch({type:y.SET_RELATED_PRODUCTS,payload:a})}catch(r){console.error("관련 상품 로드 실패:",r),f.dispatch({type:y.SET_RELATED_PRODUCTS,payload:[]})}},ct=()=>{try{const e=re.get();e&&N.dispatch({type:h.LOAD_FROM_STORAGE,payload:e})}catch(e){console.error("장바구니 로드 실패:",e)}},O=()=>{try{const e=N.getState();re.set(e)}catch(e){console.error("장바구니 저장 실패:",e)}},Ce=(e,t=1)=>{N.dispatch({type:h.ADD_ITEM,payload:{product:e,quantity:t}}),O(),v.dispatch({type:w.SHOW_TOAST,payload:{message:"장바구니에 추가되었습니다",type:"success"}}),setTimeout(()=>{v.dispatch({type:w.HIDE_TOAST})},3e3)},lt=e=>{N.dispatch({type:h.REMOVE_ITEM,payload:e}),O()},ce=(e,t)=>{N.dispatch({type:h.UPDATE_QUANTITY,payload:{productId:e,quantity:t}}),O()},it=e=>{N.dispatch({type:h.TOGGLE_SELECT,payload:e}),O()},dt=()=>{N.dispatch({type:h.SELECT_ALL}),O()},ut=()=>{N.dispatch({type:h.DESELECT_ALL}),O()},mt=()=>{N.dispatch({type:h.REMOVE_SELECTED}),O(),v.dispatch({type:w.SHOW_TOAST,payload:{message:"선택된 상품들이 삭제되었습니다",type:"info"}}),setTimeout(()=>{v.dispatch({type:w.HIDE_TOAST})},3e3)},gt=()=>{N.dispatch({type:h.CLEAR_CART}),O(),v.dispatch({type:w.SHOW_TOAST,payload:{message:"장바구니가 비워졌습니다",type:"info"}}),setTimeout(()=>{v.dispatch({type:w.HIDE_TOAST})},3e3)},p=({src:e,...t})=>{const r=String(se+e).replace("//","/");return s("img",{src:r,...t})},pt=[10,20,50,100],yt=[{value:"price_asc",label:"가격 낮은순"},{value:"price_desc",label:"가격 높은순"},{value:"name_asc",label:"이름순"},{value:"name_desc",label:"이름 역순"}],ft=async e=>{if(e.key==="Enter"){const t=e.target.value.trim();try{await at(t)}catch(r){console.error("검색 실패:",r)}}},ht=async e=>{const t=parseInt(e.target.value);try{await ot(t)}catch(r){console.error("상품 수 변경 실패:",r)}},bt=async e=>{const t=e.target.value;try{await nt(t)}catch(r){console.error("정렬 변경 실패:",r)}},fe=async e=>{const t=e.target.getAttribute("data-breadcrumb");try{if(t==="reset")await G({category1:"",category2:""});else if(t==="category1"){const r=e.target.getAttribute("data-category1");await G({category1:r,category2:""})}}catch(r){console.error("브레드크럼 네비게이션 실패:",r)}},xt=async e=>{const t=e.target.getAttribute("data-category1");if(t)try{await G({category1:t,category2:""})}catch(r){console.error("1depth 카테고리 선택 실패:",r)}},wt=async e=>{const t=e.target.getAttribute("data-category1"),r=e.target.getAttribute("data-category2");if(!(!t||!r))try{await G({category1:t,category2:r})}catch(n){console.error("2depth 카테고리 선택 실패:",n)}};function vt({searchQuery:e="",limit:t=20,sort:r="price_asc",category:n={},categories:a={}}){const o=Object.keys(a).length>0?Object.keys(a):[],c=pt.map(d=>s("option",{key:d,value:d,selected:Number(t)===d},d,"개")),i=yt.map(({value:d,label:u})=>s("option",{key:d,value:d,selected:r===d},u)),l=o.map(d=>s("button",{key:d,"data-category1":d,className:`category1-filter-btn text-left px-3 py-2 text-sm rounded-md border transition-colors
                 bg-white border-gray-300 text-gray-700 hover:bg-gray-50`,onClick:xt},d));return s("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-4"},s("div",{className:"mb-4"},s("div",{className:"relative"},s("input",{type:"text",id:"search-input",placeholder:"상품명을 검색해보세요...",value:e,className:`w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg
                        focus:ring-2 focus:ring-blue-500 focus:border-blue-500`,onKeyDown:ft}),s("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},s(p,{src:"/search-icon.svg",alt:"검색",className:"h-5 w-5 text-gray-400"})))),s("div",{className:"space-y-3"},s("div",{className:"space-y-2"},s("div",{className:"flex items-center gap-2"},s("label",{className:"text-sm text-gray-600"},"카테고리:"),["전체",n.category1,n.category2].filter((d,u)=>u===0||!!d).map((d,u)=>{if(d==="전체")return s("button",{key:"reset","data-breadcrumb":"reset",className:"text-xs hover:text-blue-800 hover:underline",onClick:fe},"전체");if(u===1)return s("button",{key:d,"data-breadcrumb":"category1","data-category1":d,className:"text-xs hover:text-blue-800 hover:underline",onClick:fe},d);if(u===2)return s("span",{key:d,className:"text-xs text-gray-600 cursor-default"},d)}).reduce((d,u,g)=>(g>0&&d.push(s("span",{className:"text-xs text-gray-500"},">")),d.push(u),d),[])),!n.category1&&s("div",{className:"flex flex-wrap gap-2"},o.length>0?l:s("div",{className:"text-sm text-gray-500 italic"},"카테고리 로딩 중...")),n.category1&&a[n.category1]&&s("div",{className:"space-y-2"},s("div",{className:"flex flex-wrap gap-2"},Object.keys(a[n.category1]).map(d=>{const u=n.category2===d;return s("button",{key:d,"data-category1":n.category1,"data-category2":d,className:`category2-filter-btn text-left px-3 py-2 text-sm rounded-md border transition-colors
                               ${u?"bg-blue-100 border-blue-300 text-blue-800":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,onClick:wt},d)})))),s("div",{className:"flex gap-2 items-center justify-between"},s("div",{className:"flex items-center gap-2"},s("label",{className:"text-sm text-gray-600"},"개수:"),s("select",{id:"limit-select",className:"text-sm border border-gray-300 rounded px-2 py-1 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",onChange:ht},c)),s("div",{className:"flex items-center gap-2"},s("label",{className:"text-sm text-gray-600"},"정렬:"),s("select",{id:"sort-select",className:`text-sm border border-gray-300 rounded px-2 py-1
                           focus:ring-1 focus:ring-blue-500 focus:border-blue-500`,onChange:bt},i)))))}const Nt=e=>{const t=e.target.closest("[data-product-id]"),r=t.getAttribute("data-product-id"),n=t.previousElementSibling;if(r&&n){const a=parseInt(n.value)+1;n.value=a,ce(r,a)}},St=e=>{const t=e.target.closest("[data-product-id]"),r=t.getAttribute("data-product-id"),n=t.nextElementSibling;if(r&&n){const a=Math.max(1,parseInt(n.value)-1);n.value=a,ce(r,a)}},Et=(e,t)=>{const r=Math.max(1,parseInt(t)||1);e&&ce(e,r)};function Ct({id:e,title:t,image:r,price:n,quantity:a,selected:o}){const c=n*a;return s("div",{className:"flex items-center py-3 border-b border-gray-100 cart-item","data-product-id":e},s("label",{className:"flex items-center mr-3"},s("input",{type:"checkbox",checked:o,className:`cart-item-checkbox w-4 h-4 text-blue-600 border-gray-300 rounded
                      focus:ring-blue-500`,"data-product-id":e,onChange:()=>it(e)})),s("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden mr-3 flex-shrink-0"},s("img",{src:r,alt:t,className:"w-full h-full object-cover cursor-pointer cart-item-image","data-product-id":e})),s("div",{className:"flex-1 min-w-0"},s("h4",{className:"text-sm font-medium text-gray-900 truncate cursor-pointer cart-item-title","data-product-id":e},t),s("p",{className:"text-sm text-gray-600 mt-1"},n.toLocaleString(),"원"),s("div",{className:"flex items-center mt-2"},s("button",{className:`quantity-decrease-btn w-7 h-7 flex items-center justify-center
                         border border-gray-300 rounded-l-md bg-gray-50 hover:bg-gray-100`,"data-product-id":e,onClick:St},s(p,{src:"/minus-icon.svg",alt:"감소",className:"w-3 h-3"})),s("input",{type:"number",value:a,min:"1",className:`quantity-input w-12 h-7 text-center text-sm border-t border-b
                        border-gray-300 focus:ring-1 focus:ring-blue-500 focus:border-blue-500`,disabled:!0,"data-product-id":e,onChange:i=>Et(e,i.target.value)}),s("button",{className:`quantity-increase-btn w-7 h-7 flex items-center justify-center
                         border border-gray-300 rounded-r-md bg-gray-50 hover:bg-gray-100`,"data-product-id":e,onClick:Nt},s(p,{src:"/plus-icon.svg",alt:"증가",className:"w-3 h-3"})))),s("div",{className:"text-right ml-3"},s("p",{className:"text-sm font-medium text-gray-900"},c.toLocaleString(),"원"),s("button",{className:"cart-item-remove-btn mt-1 text-xs text-red-600 hover:text-red-800","data-product-id":e,onClick:()=>lt(e)},"삭제")))}const he=()=>{v.dispatch({type:w.CLOSE_CART_MODAL})},Tt=e=>{e.target.checked?dt():ut()},At=()=>{v.dispatch({type:w.SHOW_TOAST,payload:{message:"구매 기능은 추후 구현 예정입니다.",type:"info"}})};let Z=!1;const Te=e=>{e.key==="Escape"&&(v.getState().cartModal.isOpen&&v.dispatch({type:w.CLOSE_CART_MODAL}),document.removeEventListener("keydown",Te),Z=!1)},Ot=()=>{Z||(document.addEventListener("keydown",Te),Z=!0)};function _t({items:e=[],selectedAll:t=!1,isOpen:r=!1}){if(Ot(),!r)return"";const n=e.filter(i=>i.selected),a=n.length,o=e.reduce((i,l)=>i+l.price*l.quantity,0),c=n.reduce((i,l)=>i+l.price*l.quantity,0);return s("div",{className:"fixed inset-0 z-50 overflow-y-auto cart-modal"},s("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity cart-modal-overlay",onClick:he}),s("div",{className:"flex min-h-full items-end justify-center p-0 sm:items-center sm:p-4"},s("div",{className:"relative bg-white rounded-t-lg sm:rounded-lg shadow-xl w-full max-w-md sm:max-w-lg max-h-[90vh] overflow-hidden"},s("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-4 flex items-center justify-between"},s("h2",{className:"text-lg font-bold text-gray-900 flex items-center"},s(p,{src:"/cart-icon.svg",alt:"장바구니",className:"w-5 h-5 mr-2"}),"장바구니",e.length>0&&s("span",{className:"text-sm font-normal text-gray-600 ml-1"},"(",e.length,")")),s("button",{id:"cart-modal-close-btn",className:"text-gray-400 hover:text-gray-600 p-1",onClick:he},s(p,{src:"/close-icon.svg",alt:"닫기",className:"w-6 h-6"}))),e.length===0?s("div",{className:"flex-1 flex items-center justify-center p-8"},s("div",{className:"text-center"},s("div",{className:"text-gray-400 mb-4"},s(p,{src:"/empty-cart-icon.svg",alt:"빈 장바구니",className:"mx-auto h-12 w-12"})),s("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"장바구니가 비어있습니다"),s("p",{className:"text-gray-600"},"원하는 상품을 담아보세요!"))):s("div",{className:"flex flex-col max-h-[calc(90vh-120px)]"},s("div",{className:"p-4 border-b border-gray-200 bg-gray-50"},s("label",{className:"flex items-center text-sm text-gray-700"},s("input",{type:"checkbox",id:"cart-modal-select-all-checkbox",checked:t,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mr-2",onChange:Tt}),"전체선택 (",e.length,"개)")),s("div",{className:"flex-1 overflow-y-auto"},s("div",{className:"p-4 space-y-4"},e.map(i=>s(Ct,{...i}))))),e.length>0&&s("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 p-4"},a>0&&s("div",{className:"flex justify-between items-center mb-3 text-sm"},s("span",{className:"text-gray-600"},"선택한 상품 (",a,"개)"),s("span",{className:"font-medium"},c.toLocaleString(),"원")),s("div",{className:"flex justify-between items-center mb-4"},s("span",{className:"text-lg font-bold text-gray-900"},"총 금액"),s("span",{className:"text-xl font-bold text-blue-600"},o.toLocaleString(),"원")),s("div",{className:"space-y-2"},a>0&&s("button",{id:"cart-modal-remove-selected-btn",className:`w-full bg-red-600 text-white py-2 px-4 rounded-md
                                 hover:bg-red-700 transition-colors text-sm`,onClick:mt},"선택한 상품 삭제 (",a,"개)"),s("div",{className:"flex gap-2"},s("button",{id:"cart-modal-clear-cart-btn",className:`flex-1 bg-gray-600 text-white py-2 px-4 rounded-md
                                 hover:bg-gray-700 transition-colors text-sm`,onClick:gt},"전체 비우기"),s("button",{id:"cart-modal-checkout-btn",className:`flex-1 bg-blue-600 text-white py-2 px-4 rounded-md
                                 hover:bg-blue-700 transition-colors text-sm`,onClick:At},"구매하기")))))))}const Lt=({error:e})=>s("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},s("div",{className:"text-center"},s("div",{className:"text-red-500 mb-4"},s(p,{src:"/error-large-icon.svg",alt:"오류",className:"mx-auto h-12 w-12"})),s("h1",{className:"text-xl font-bold text-gray-900 mb-2"},"상품을 찾을 수 없습니다"),s("p",{className:"text-gray-600 mb-4"},e||"요청하신 상품이 존재하지 않습니다."),s("button",{onClick:()=>window.history.back(),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 mr-2"},"이전 페이지"),s("a",{href:"/","data-link":"/",className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700"},"홈으로"))),kt=()=>{v.dispatch({type:w.HIDE_TOAST})};function Rt({isVisible:e=!1,message:t="",type:r="info"}){if(!e)return"";const n=()=>{switch(r){case"success":return{bg:"bg-green-600",icon:s(p,{src:"/success-icon.svg",alt:"성공",className:"w-5 h-5"})};case"error":return{bg:"bg-red-600",icon:s(p,{src:"/error-icon.svg",alt:"오류",className:"w-5 h-5"})};case"warning":return{bg:"bg-yellow-600",icon:s(p,{src:"/warning-icon.svg",alt:"경고",className:"w-5 h-5"})};default:return{bg:"bg-blue-600",icon:s(p,{src:"/info-icon.svg",alt:"정보",className:"w-5 h-5"})}}},{bg:a,icon:o}=n();return s("div",{className:"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50 toast-container"},s("div",{className:`${a} text-white px-4 py-3 rounded-lg shadow-lg flex items-center space-x-2 max-w-sm`},s("div",{className:"flex-shrink-0"},o),s("p",{className:"text-sm font-medium"},t),s("button",{id:"toast-close-btn",className:"flex-shrink-0 ml-2 text-white hover:text-gray-200",onClick:kt},s(p,{src:"/close-icon-white.svg",alt:"닫기",className:"w-4 h-4"}))))}function It(){return s("h1",{className:"text-xl font-bold text-gray-900"},s("a",{href:"/","data-link":"/"},"쇼핑몰"))}function Pt(){return s("footer",{className:"bg-white shadow-sm sticky top-0 z-40"},s("div",{className:"max-w-md mx-auto py-8 text-center text-gray-500"},s("p",null,"© ",new Date().getFullYear()," 항해플러스 프론트엔드 쇼핑몰")))}const Dt=async e=>{const r=f.getState().products.find(n=>n.productId===e);r&&Ce(r,1)};function Mt({productId:e,title:t,image:r,lprice:n,brand:a,onClick:o}){const c=Number(n),i=l=>{l.preventDefault(),o(e)};return s("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden product-card","data-product-id":e},s("div",{className:"aspect-square bg-gray-100 overflow-hidden cursor-pointer product-image",onClick:i},s("img",{src:r,alt:t,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-200",loading:"lazy"})),s("div",{className:"p-3"},s("div",{className:"cursor-pointer product-info mb-3",onClick:i},s("h3",{className:"text-sm font-medium text-gray-900 line-clamp-2 mb-1"},t),s("p",{className:"text-xs text-gray-500 mb-2"},a),s("p",{className:"text-lg font-bold text-gray-900"},c.toLocaleString(),"원")),s("button",{className:`w-full bg-blue-600 text-white text-sm py-2 px-3 rounded-md
                       hover:bg-blue-700 transition-colors add-to-cart-btn`,"data-product-id":e,onClick:()=>Dt(e)},"장바구니 담기")))}function Ut(){return s("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden animate-pulse"},s("div",{className:"aspect-square bg-gray-200"}),s("div",{className:"p-3"},s("div",{className:"h-4 bg-gray-200 rounded mb-2"}),s("div",{className:"h-3 bg-gray-200 rounded w-2/3 mb-2"}),s("div",{className:"h-5 bg-gray-200 rounded w-1/2 mb-3"}),s("div",{className:"h-8 bg-gray-200 rounded"})))}const qt=async()=>{try{await oe(!0)}catch(e){console.error("재시도 실패:",e)}},jt=async e=>{m.push(`/product/${e}`)};function Ht({products:e=[],loading:t=!1,error:r=null,totalCount:n=0,hasMore:a=!0}){return r?s("div",{className:"text-center py-12"},s("div",{className:"text-red-500 mb-4"},s(p,{src:"/error-large-icon.svg",alt:"오류",className:"mx-auto h-12 w-12"})),s("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"오류가 발생했습니다"),s("p",{className:"text-gray-600 mb-4"},r),s("button",{id:"retry-btn",className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",onClick:qt},"다시 시도")):!t&&e.length===0?s("div",{className:"text-center py-12"},s("div",{className:"text-gray-400 mb-4"},s(p,{src:"/search-large-icon.svg",alt:"검색",className:"mx-auto h-12 w-12"})),s("h3",{className:"text-lg font-medium text-gray-900 mb-2"},"상품을 찾을 수 없습니다"),s("p",{className:"text-gray-600"},"다른 검색어를 시도해보세요.")):s("div",null,n>0&&s("div",{className:"mb-4 text-sm text-gray-600"},"총 ",s("span",{className:"font-medium text-gray-900"},n.toLocaleString(),"개"),"의 상품"),s("div",{className:"grid grid-cols-2 gap-4 mb-6",id:"products-grid"},e.map(o=>s(Mt,{...o,onClick:jt})),t&&Array.from({length:6}).map(()=>s(Ut,null))),t&&e.length>0&&s("div",{className:"text-center py-4"},s("div",{className:"inline-flex items-center"},s(p,{src:"/loading-icon.svg",alt:"로딩",className:"animate-spin h-5 w-5 text-blue-600 mr-2"}),s("span",{className:"text-sm text-gray-600"},"상품을 불러오는 중..."))),!a&&e.length>0&&!t&&s("div",{className:"text-center py-4 text-sm text-gray-500"},"모든 상품을 확인했습니다"),s("div",{id:"scroll-trigger",className:"h-4"}))}const Wt=async e=>{const t=new URLSearchParams(e).toString();m.push(`/?${t}`)},Qt=async()=>{const e=f.getState().currentProduct,t={category1:e==null?void 0:e.category1,category2:e==null?void 0:e.category2,currentPage:1},r=new URLSearchParams(t).toString();m.push(`/?${r}`)},Bt=()=>{const e=document.getElementById("quantity-input");if(e){const t=parseInt(e.getAttribute("max"))||100;e.value=Math.min(t,parseInt(e.value)+1)}},Ft=()=>{const e=document.getElementById("quantity-input");e&&(e.value=Math.max(1,parseInt(e.value)-1))},Gt=()=>{const e=document.getElementById("quantity-input"),t=e?parseInt(e.value):1,n=f.getState().currentProduct;n&&(console.log("🛒 상품 상세 페이지에서 장바구니 추가:",n),Ce(n,t))};function Vt({product:e,relatedProducts:t=[]}){const{productId:r,title:n,image:a,lprice:o,brand:c,description:i="",rating:l=0,reviewCount:d=0,stock:u=100,category1:g,category2:_}=e,z=Number(o),U=[];return g&&U.push({name:g,category:"category1",value:g}),_&&U.push({name:_,category:"category2",value:_}),s("div",null,U.length>0&&s("nav",{className:"mb-4"},s("div",{className:"flex items-center space-x-2 text-sm text-gray-600"},s("a",{href:"/","data-link":"/",className:"hover:text-blue-600 transition-colors"},"홈"),U.map((b,q)=>[s(p,{key:`${b.category}-icon`,src:"/chevron-right-icon.svg",alt:"오른쪽 화살표",className:"w-4 h-4 text-gray-400"}),s("button",{key:`${b.category}-btn`,className:"breadcrumb-link",[`data-${b.category}`]:b.value,onClick:()=>Wt(q===0?{category1:b.value}:{category1:U[q-1].value,category2:b.value})},b.name)]).flat())),s("div",{className:"bg-white rounded-lg shadow-sm mb-6"},s("div",{className:"p-4"},s("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden mb-4"},s("img",{src:a,alt:n,className:"w-full h-full object-cover product-detail-image"})),s("div",null,s("p",{className:"text-sm text-gray-600 mb-1"},c),s("h1",{className:"text-xl font-bold text-gray-900 mb-3"},n),l>0&&s("div",{className:"flex items-center mb-3"},s("div",{className:"flex items-center"},Array(5).fill(0).map((b,q)=>s(p,{key:q,src:"/star-icon.svg",alt:"별점",className:`w-4 h-4 ${q<l?"text-yellow-400":"text-gray-300"}`}))),s("span",{className:"ml-2 text-sm text-gray-600"},l,".0 (",d.toLocaleString(),"개 리뷰)")),s("div",{className:"mb-4"},s("span",{className:"text-2xl font-bold text-blue-600"},z.toLocaleString(),"원")),s("div",{className:"text-sm text-gray-600 mb-4"},"재고 ",u.toLocaleString(),"개"),i&&s("div",{className:"text-sm text-gray-700 leading-relaxed mb-6"},i))),s("div",{className:"border-t border-gray-200 p-4"},s("div",{className:"flex items-center justify-between mb-4"},s("span",{className:"text-sm font-medium text-gray-900"},"수량"),s("div",{className:"flex items-center"},s("button",{id:"quantity-decrease",className:`w-8 h-8 flex items-center justify-center border border-gray-300
                             rounded-l-md bg-gray-50 hover:bg-gray-100`,onClick:Ft},s(p,{src:"/quantity-minus-icon.svg",alt:"수량 감소",className:"w-4 h-4"})),s("input",{type:"number",id:"quantity-input",value:"1",min:"1",max:u,className:`w-16 h-8 text-center text-sm border-t border-b border-gray-300
                            focus:ring-1 focus:ring-blue-500 focus:border-blue-500`}),s("button",{id:"quantity-increase",className:`w-8 h-8 flex items-center justify-center border border-gray-300
                             rounded-r-md bg-gray-50 hover:bg-gray-100`,onClick:Bt},s(p,{src:"/quantity-plus-icon.svg",alt:"수량 증가",className:"w-4 h-4"})))),s("button",{id:"add-to-cart-btn","data-product-id":r,className:`w-full bg-blue-600 text-white py-3 px-4 rounded-md
                         hover:bg-blue-700 transition-colors font-medium`,onClick:Gt},"장바구니 담기"))),s("div",{className:"mb-6"},s("button",{className:`block w-full text-center bg-gray-100 text-gray-700 py-3 px-4 rounded-md
                  hover:bg-gray-200 transition-colors go-to-product-list`,onClick:Qt},"상품 목록으로 돌아가기")),t.length>0&&s("div",{className:"bg-white rounded-lg shadow-sm"},s("div",{className:"p-4 border-b border-gray-200"},s("h2",{className:"text-lg font-bold text-gray-900"},"관련 상품"),s("p",{className:"text-sm text-gray-600"},"같은 카테고리의 다른 상품들")),s("div",{className:"p-4"},s("div",{className:"grid grid-cols-2 gap-3 responsive-grid"},t.slice(0,20).map(b=>s("div",{key:b.productId,className:"bg-gray-50 rounded-lg p-3 related-product-card cursor-pointer","data-product-id":b.productId,onClick:()=>m.push(`/product/${b.productId}`)},s("div",{className:"aspect-square bg-white rounded-md overflow-hidden mb-2"},s("img",{src:b.image,alt:b.title,className:"w-full h-full object-cover",loading:"lazy"})),s("h3",{className:"text-sm font-medium text-gray-900 mb-1 line-clamp-2"},b.title),s("p",{className:"text-sm font-bold text-blue-600"},Number(b.lprice).toLocaleString(),"원")))))))}const zt=()=>{v.dispatch({type:w.OPEN_CART_MODAL})},le=({headerLeft:e,children:t})=>{const r=N.getState(),{cartModal:n,toast:a}=v.getState(),o=r.items.length,c=s("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center"},o>99?"99+":o);return s("div",{className:"min-h-screen bg-gray-50"},s("header",{className:"bg-white shadow-sm sticky top-0 z-40"},s("div",{className:"max-w-md mx-auto px-4 py-4"},s("div",{className:"flex items-center justify-between"},e,s("div",{className:"flex items-center space-x-2"},s("button",{id:"cart-icon-btn",className:"relative p-2 text-gray-700 hover:text-gray-900 transition-colors",onClick:zt},s(p,{src:"/cart-header-icon.svg",alt:"장바구니",className:"w-6 h-6"}),o>0&&c))))),s("main",{className:"max-w-md mx-auto px-4 py-4"},t),s(_t,{...r,isOpen:n.isOpen}),s(Rt,{...a}),s(Pt,null))},Ae=s("h1",{className:"text-xl font-bold text-gray-900"},s("a",{href:"/","data-link":"/"},"쇼핑몰"));console.log(Ae);let V=!1;const Oe=async()=>{var e;if(((e=m.route)==null?void 0:e.path)==="/"&&Ue(200)){const t=f.getState(),r=t.products.length<t.totalCount;if(t.loading||!r)return;try{await st()}catch(n){console.error("무한 스크롤 로드 실패:",n)}}},$t=()=>{V||(window.addEventListener("scroll",Oe),V=!0)},Yt=()=>{V&&(window.removeEventListener("scroll",Oe),V=!1)},Kt=Ee({onMount:()=>{$t(),rt()},onUnmount:()=>{Yt()},watches:[()=>{const{search:e,limit:t,sort:r,category1:n,category2:a}=m.query;return[e,t,r,n,a]},()=>oe(!0)]},()=>{console.log("🏠 홈 페이지 로드");const e=f.getState(),{search:t,limit:r,sort:n,category1:a,category2:o}=m.query,{products:c,loading:i,error:l,totalCount:d,categories:u}=e,g={category1:a,category2:o},_=c.length<d;return s(le,{headerLeft:Ae},s(vt,{searchQuery:t,category:g,sort:n,limit:r,categories:u}),s("div",{className:"mb-6"},s(Ht,{products:c,loading:i,error:l,totalCount:d,hasMore:_})))}),Jt=Ee({onMount:()=>{pe(m.params.id)},watches:[()=>[m.params.id],()=>pe(m.params.id)]},()=>{const{currentProduct:e,relatedProducts:t=[],error:r,loading:n}=f.getState();return s(le,{headerLeft:s("div",{className:"flex items-center space-x-3"},s("button",{onClick:()=>window.history.back(),className:"p-2 text-gray-700 hover:text-gray-900 transition-colors"},s(p,{src:"/back-icon.svg",alt:"뒤로",className:"w-6 h-6"})),s("h1",{className:"text-lg font-bold text-gray-900"},"상품 상세"))},s("div",{className:"min-h-screen bg-gray-50 p-4"},n?s("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center"},s("div",{className:"text-center"},s("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s("p",{className:"text-gray-600"},"상품 정보를 불러오는 중..."))):r&&!e?s(Lt,{error:r}):s(Vt,{product:e,relatedProducts:t})))}),Xt=()=>le({headerLeft:It(),children:s("div",{className:"text-center my-4 py-20 shadow-md p-6 bg-white rounded-lg"},s(p,{src:"/404.svg",alt:"페이지를 찾을 수 없습니다"}),s("a",{href:"/","data-link":"/",className:"inline-block px-6 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors"},"홈으로"))});m.addRoute("/",Kt);m.addRoute("/product/:id",Jt);m.addRoute(".*",Xt);const B=qe(()=>{const e=document.getElementById("root");if(!e)return;const t=m.target;Fe(s(t,null),e)});function Zt(){f.subscribe(B),N.subscribe(B),v.subscribe(B),m.subscribe(B)}const er=()=>Ie(async()=>{const{worker:e}=await import("./browser-ipwmi47v.js");return{worker:e}},[]).then(({worker:e})=>e.start({serviceWorker:{url:`${se}mockServiceWorker.js`},onUnhandledRequest:"bypass"}));function tr(){console.log("🚀 애플리케이션이 시작되었습니다."),console.log("✅ MSW 워커 시작 완료"),ct(),console.log("✅ 장바구니 데이터 복원 완료"),Zt(),console.log("✅ 렌더링 시스템 초기화 완료"),m.start(),console.log("✅ 렌더링 설정 완료"),console.log("🎉 애플리케이션 초기화 완료!")}er().then(tr);
